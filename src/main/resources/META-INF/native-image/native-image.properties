## Initialize classes at runtime for Native Image (default config native image)
Args=--initialize-at-run-time=com.htv.oauth2.util.CryptoUtil$SecureRandomHolder \
  --initialize-at-run-time=java.security.SecureRandom \
  -H:+ReportExceptionStackTraces \
  -H:+PrintClassInitialization \
  -H:+AddAllCharsets \
  -H:+JNI \
  --enable-url-protocols=http,https \
  --enable-all-security-services \
  --allow-incomplete-classpath \
  --initialize-at-run-time=io.lettuce.core.resource.DefaultClientResources \
  --initialize-at-run-time=io.lettuce.core.resource.AddressResolverGroupProvider \
  --initialize-at-run-time=io.lettuce.core.resource.AddressResolverGroupProvider$DefaultDnsAddressResolverGroupWrapper \
  --trace-object-instantiation=org.LatencyUtils.PauseDetector$PauseDetectorThread \
  --initialize-at-run-time=io.lettuce.core.metrics.DefaultCommandLatencyCollector$NoPauseDetector \
  --initialize-at-run-time=org.LatencyUtils.PauseDetector \
  --initialize-at-build-time=org.slf4j \
  --initialize-at-run-time=io.netty.handler.ssl \
  --initialize-at-run-time=io.lettuce.core.ClientOptions \
  --initialize-at-build-time=io.netty.handler.ssl.ClientAuth \
  --initialize-at-build-time=io.netty.handler.ssl.SslProvider \
  --initialize-at-run-time=io.netty.internal.tcnative.SSL

#============================ false
# ============================================================================
# Native Image Configuration for Quarkus OAuth2 Server ==>> XXXX
# ============================================================================

# Runtime Initialization
#Args = --initialize-at-run-time=com.htv.oauth2.util.CryptoUtil$SecureRandomHolder \
#       --initialize-at-run-time=java.security.SecureRandom \
#       --initialize-at-run-time=io.lettuce.core.resource.DefaultClientResources \
#       --initialize-at-run-time=io.lettuce.core.resource.AddressResolverGroupProvider \
#       --initialize-at-run-time=io.lettuce.core.resource.AddressResolverGroupProvider$DefaultDnsAddressResolverGroupWrapper \
#       --initialize-at-run-time=io.lettuce.core.metrics.DefaultCommandLatencyCollector$NoPauseDetector \
#       --initialize-at-run-time=org.LatencyUtils.PauseDetector \
#       --initialize-at-run-time=io.netty.handler.ssl \
#       --initialize-at-run-time=io.netty.handler.codec.http2.Http2CodecUtil \
#       --initialize-at-run-time=io.netty.handler.codec.http2.DefaultHttp2FrameWriter \
#       --initialize-at-run-time=io.netty.handler.codec.http.HttpObjectEncoder \
#       --initialize-at-run-time=io.netty.handler.codec.http.websocketx.WebSocket00FrameEncoder \
#       --initialize-at-build-time=org.slf4j \
#       --initialize-at-build-time=io.netty.handler.ssl.ClientAuth \
#       --enable-url-protocols=http,https \
#       --enable-all-security-services \
#       --allow-incomplete-classpath \
#       -H:+ReportExceptionStackTraces \
#       -H:+JNI
#========================================

## ============================================================================
## Native Image Configuration for Quarkus OAuth2 Server
## File: src/main/resources/META-INF/native-image/native-image.properties
## ============================================================================
#
## IMPORTANT: Không duplicate config t? application.yml
## File này ch? ch?a native-specific args mà Quarkus không h? tr?
#
## ============================================================================
## Runtime Initialization (Classes that must be initialized at runtime)
## ============================================================================
#
## Crypto and Security
#Args=--initialize-at-run-time=com.htv.oauth2.util.CryptoUtil$SecureRandomHolder
#Args=--initialize-at-run-time=java.security.SecureRandom
#
## Lettuce Redis Client (Netty-based)
#Args=--initialize-at-run-time=io.lettuce.core.resource.DefaultClientResources
#Args=--initialize-at-run-time=io.lettuce.core.resource.AddressResolverGroupProvider
#Args=--initialize-at-run-time=io.lettuce.core.resource.AddressResolverGroupProvider$DefaultDnsAddressResolverGroupWrapper
#Args=--initialize-at-run-time=io.lettuce.core.metrics.DefaultCommandLatencyCollector$NoPauseDetector
#Args=--initialize-at-run-time=org.LatencyUtils.PauseDetector
#
## Netty (Network framework)
#Args=--initialize-at-run-time=io.netty.handler.ssl
#Args=--initialize-at-run-time=io.netty.handler.codec.http2.Http2CodecUtil
#Args=--initialize-at-run-time=io.netty.handler.codec.http2.DefaultHttp2FrameWriter
#Args=--initialize-at-run-time=io.netty.handler.codec.http.HttpObjectEncoder
#Args=--initialize-at-run-time=io.netty.handler.codec.http.websocketx.WebSocket00FrameEncoder
#
## ============================================================================
## Build-time Initialization
## ============================================================================
#
## Logging (SLF4J must be initialized at build time)
#Args=--initialize-at-build-time=org.slf4j
#
## ============================================================================
## Debugging & Tracing (Optional - ch? b?t khi c?n debug)
## ============================================================================
#
## Uncomment ?? debug native image build issues
## Args=-H:+PrintClassInitialization
## Args=-H:+TraceClassInitialization
## Args=--trace-object-instantiation=io.netty.resolver.dns.DnsNameResolverBuilder
## Args=--trace-object-instantiation=org.LatencyUtils.PauseDetector$PauseDetectorThread
#
## ============================================================================
## Security & Protocols
## ============================================================================
#
#Args=--enable-url-protocols=http,https
#Args=--enable-all-security-services
#
## ============================================================================
## Compatibility Options
## ============================================================================
#
## Allow incomplete classpath (for dynamic loading)
#Args=--allow-incomplete-classpath
#
## Report exceptions with full stack traces
#Args=-H:+ReportExceptionStackTraces
#
## ============================================================================
## JNI Support
## ============================================================================
#
#Args=-H:+JNI
#
## ============================================================================
## NOTES
## ============================================================================
##
## 1. Không thêm các args này vì ?ã có trong application.yml:
##    - -H:+AddAllCharsets (có trong quarkus.native.additional-build-args)
##    - -H:ReflectionConfigurationResources=reflection-config.json (có trong application.yml)
##    - -H:+UnlockExperimentalVMOptions (có trong application.yml)
##
## 2. Không thêm architecture-specific args (-march) vì s? ???c thêm
##    t? ??ng trong GitHub Actions workflow
##
## 3. Memory settings (-J-Xmx8g) nên ???c set trong application.yml
##    ho?c build command, không ph?i ? ?ây
##
## 4. N?u g?p l?i "Failed to create the main Isolate (code 24)":
##    - Ki?m tra memory available trên node
##    - Ki?m tra architecture match (ARM vs AMD64)
##    - Xem logs chi ti?t v?i -H:+PrintClassInitialization
##
## 5. N?u g?p l?i liên quan ??n Netty ho?c Redis:
##    - Ki?m tra initialize-at-run-time args ? trên
##    - Thêm --trace-object-instantiation n?u c?n debug
##
## ============================================================================